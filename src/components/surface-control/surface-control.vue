<template>
  <nav class="surface-control">
    <el-tooltip class="item" effect="dark" content="Home page" placement="right">
      <router-link to="/" active-class="active-link" exact><img src="@/assets/logo-everyday.png" alt="" class="monday-logo-navbar" /></router-link>
    </el-tooltip>
    <el-tooltip class="item" effect="dark" content="Work space" placement="right">
      <router-link to="/boards" active-class="active-link">
        <!-- <ion-icon name="grid-outline"></ion-icon> -->
        <svg viewBox="0 0 20 20" fill="currentColor" width="23" height="23" aria-hidden="true" class="icon_component surface-item-icon icon_component--no-focus-style">
          <path
            d="M3 2.25C2.58579 2.25 2.25 2.58579 2.25 3V8.38462C2.25 8.79883 2.58579 9.13462 3 9.13462H8.38462C8.79883 9.13462 9.13462 8.79883 9.13462 8.38462V3C9.13462 2.58579 8.79883 2.25 8.38462 2.25H3ZM3.75 7.63462V3.75H7.63462V7.63462H3.75ZM11.6154 2.25C11.2012 2.25 10.8654 2.58579 10.8654 3V8.38462C10.8654 8.79883 11.2012 9.13462 11.6154 9.13462H17C17.4142 9.13462 17.75 8.79883 17.75 8.38462V3C17.75 2.58579 17.4142 2.25 17 2.25H11.6154ZM12.3654 7.63462V3.75H16.25V7.63462H12.3654ZM2.25 11.6154C2.25 11.2012 2.58579 10.8654 3 10.8654H8.38462C8.79883 10.8654 9.13462 11.2012 9.13462 11.6154V17C9.13462 17.4142 8.79883 17.75 8.38462 17.75H3C2.58579 17.75 2.25 17.4142 2.25 17V11.6154ZM3.75 12.3654V16.25H7.63462V12.3654H3.75ZM11.6154 10.8654C11.2012 10.8654 10.8654 11.2012 10.8654 11.6154V17C10.8654 17.4142 11.2012 17.75 11.6154 17.75H17C17.4142 17.75 17.75 17.4142 17.75 17V11.6154C17.75 11.2012 17.4142 10.8654 17 10.8654H11.6154ZM12.3654 16.25V12.3654H16.25V16.25H12.3654Z"
            fill="currentColor"
            fill-rule="evenodd"
            clip-rule="evenodd"
          ></path>
        </svg>
      </router-link>
    </el-tooltip>
    <el-tooltip v-if="!isDarkMode" class="item" effect="dark" content="Dark mode" placement="right">
      <button class="btn btn-icon" active-class="active-link" @click="toggleDarkMode">
        <svg viewBox="0 0 20 20" fill="currentColor" width="16" height="16" aria-hidden="true" aria-label="Dark" class="icon_component icon_component--no-focus-style">
          <path
            d="M10.1686 18C9.56977 18 8.97099 17.9381 8.38252 17.8038C7.06107 17.5045 5.81187 16.854 4.78981 15.9352C3.76774 15.0267 2.98313 13.8498 2.50823 12.549C2.03333 11.2482 1.8888 9.8338 2.08495 8.47105C2.2811 7.09797 2.80762 5.78684 3.61289 4.67186C4.4388 3.54656 5.52281 2.6587 6.75135 2.07024C7.03009 1.94635 7.35013 1.98765 7.58758 2.1838C7.81471 2.37996 7.90762 2.7 7.82503 2.98907C7.52564 4.01113 7.45337 5.09514 7.62888 6.13785C7.80439 7.19089 8.22767 8.19231 8.83677 9.03887C9.44588 9.88542 10.2615 10.5874 11.1803 11.0623C12.9457 11.9708 15.124 12.0121 16.9101 11.1656C17.1888 11.0314 17.5088 11.0727 17.7463 11.2791C17.9837 11.4753 18.0767 11.7953 17.9837 12.0844C17.5914 13.4059 16.8688 14.6241 15.8983 15.6049C14.9279 16.5856 13.7303 17.298 12.4192 17.68C11.6862 17.8968 10.9325 18 10.1686 18ZM6.00803 4.37247C5.58475 4.72348 5.20277 5.12611 4.88272 5.58036C4.222 6.48886 3.78839 7.56255 3.63353 8.67753C3.46835 9.80283 3.59224 10.9591 3.97422 12.0225C4.35621 13.0858 4.99629 14.0356 5.83252 14.7789C6.65843 15.5223 7.67018 16.0385 8.73354 16.2862C9.80722 16.534 10.9325 16.4927 11.9856 16.1933C13.0386 15.8836 14.0194 15.3055 14.804 14.5105C15.2066 14.1079 15.5576 13.6536 15.8467 13.1581C14.04 13.5504 12.1198 13.2923 10.4783 12.4457C9.34264 11.8573 8.34123 11.0004 7.58758 9.94737C6.83394 8.90465 6.31775 7.67611 6.10094 6.39595C5.98738 5.73522 5.95641 5.04352 6.00803 4.37247Z"
            fill="currentColor"
          ></path>
        </svg>
      </button>
    </el-tooltip>
    <el-tooltip v-else class="item" effect="dark" content="Light mode" placement="right">
      <button class="btn btn-icon" active-class="active-link" @click="toggleDarkMode">
        <svg viewBox="0 0 20 20" fill="currentColor" width="16" height="16" aria-hidden="true" aria-label="Light" class="icon_component icon_component--no-focus-style">
          <path
            d="M10 2.25C10.4142 2.25 10.75 2.58579 10.75 3V5C10.75 5.41421 10.4142 5.75 10 5.75C9.58579 5.75 9.25 5.41421 9.25 5V3C9.25 2.58579 9.58579 2.25 10 2.25ZM7.34835 7.34835C8.05161 6.64509 9.00544 6.25 10 6.25C10.9946 6.25 11.9484 6.64509 12.6517 7.34835C13.3549 8.05161 13.75 9.00544 13.75 10C13.75 10.9946 13.3549 11.9484 12.6517 12.6517C11.9484 13.3549 10.9946 13.75 10 13.75C9.00544 13.75 8.05161 13.3549 7.34835 12.6517C6.64509 11.9484 6.25 10.9946 6.25 10C6.25 9.00544 6.64509 8.05161 7.34835 7.34835ZM10 7.75C9.40326 7.75 8.83097 7.98705 8.40901 8.40901C7.98705 8.83097 7.75 9.40326 7.75 10C7.75 10.5967 7.98705 11.169 8.40901 11.591C8.83097 12.0129 9.40326 12.25 10 12.25C10.5967 12.25 11.169 12.0129 11.591 11.591C12.0129 11.169 12.25 10.5967 12.25 10C12.25 9.40326 12.0129 8.83097 11.591 8.40901C11.169 7.98705 10.5967 7.75 10 7.75ZM10.75 15C10.75 14.5858 10.4142 14.25 10 14.25C9.58579 14.25 9.25 14.5858 9.25 15V17C9.25 17.4142 9.58579 17.75 10 17.75C10.4142 17.75 10.75 17.4142 10.75 17V15ZM14.25 10C14.25 9.58579 14.5858 9.25 15 9.25H17C17.4142 9.25 17.75 9.58579 17.75 10C17.75 10.4142 17.4142 10.75 17 10.75H15C14.5858 10.75 14.25 10.4142 14.25 10ZM3 9.25C2.58579 9.25 2.25 9.58579 2.25 10C2.25 10.4142 2.58579 10.75 3 10.75H5C5.41421 10.75 5.75 10.4142 5.75 10C5.75 9.58579 5.41421 9.25 5 9.25H3ZM15.4797 4.52033C15.7726 4.81322 15.7726 5.2881 15.4797 5.58099L14.0657 6.99499C13.7728 7.28788 13.2979 7.28788 13.005 6.99499C12.7121 6.7021 12.7121 6.22722 13.005 5.93433L14.419 4.52033C14.7119 4.22744 15.1868 4.22744 15.4797 4.52033ZM6.99432 14.0663C7.28721 13.7734 7.28721 13.2986 6.99432 13.0057C6.70142 12.7128 6.22655 12.7128 5.93366 13.0057L4.51966 14.4197C4.22676 14.7126 4.22676 15.1874 4.51966 15.4803C4.81255 15.7732 5.28742 15.7732 5.58032 15.4803L6.99432 14.0663ZM13.005 13.0057C13.2979 12.7128 13.7728 12.7128 14.0657 13.0057L15.4797 14.4197C15.7726 14.7126 15.7726 15.1874 15.4797 15.4803C15.1868 15.7732 14.7119 15.7732 14.419 15.4803L13.005 14.0663C12.7121 13.7734 12.7121 13.2986 13.005 13.0057ZM5.58032 4.52033C5.28742 4.22744 4.81255 4.22744 4.51966 4.52033C4.22676 4.81322 4.22676 5.2881 4.51966 5.58099L5.93366 6.99499C6.22655 7.28788 6.70142 7.28788 6.99432 6.99499C7.28721 6.7021 7.28721 6.22722 6.99432 5.93433L5.58032 4.52033Z"
            fill="currentColor"
            fill-rule="evenodd"
            clip-rule="evenodd"
          ></path>
        </svg>
      </button>
    </el-tooltip>
    <!-- <el-tooltip class="item" effect="dark" content="Inbox" placement="right">
      <button class="btn btn-icon" to="/boards" active-class="active-link">
        <svg viewBox="0 0 20 20" fill="currentColor" width="23" height="23" aria-hidden="true" class="icon_component surface-item-icon icon_component--no-focus-style">
          <path
            d="M1.91632 11.0669C1.91632 10.6527 2.25211 10.3169 2.66632 10.3169H7.44893C7.86314 10.3169 8.19893 10.6527 8.19893 11.0669V11.6764C8.19893 11.9011 8.40478 12.1455 8.72429 12.1455H11.5939C11.9134 12.1455 12.1192 11.9011 12.1192 11.6764V11.0669C12.1192 10.6527 12.455 10.3169 12.8692 10.3169H17.333C17.7472 10.3169 18.083 10.6527 18.083 11.0669V13.3336C18.083 14.8523 16.8518 16.0836 15.333 16.0836H4.66632C3.14754 16.0836 1.91632 14.8523 1.91632 13.3336V11.0669ZM3.41632 11.8169V13.3336C3.41632 14.0239 3.97597 14.5836 4.66632 14.5836H15.333C16.0233 14.5836 16.583 14.0239 16.583 13.3336V11.8169H13.6142C13.5391 12.8634 12.6313 13.6455 11.5939 13.6455H8.72429C7.68683 13.6455 6.77904 12.8634 6.70395 11.8169H3.41632Z"
            fill="currentColor"
            fill-rule="evenodd"
            clip-rule="evenodd"
          ></path>
          <path
            d="M5.84564 5.41675C5.59751 5.41675 5.37654 5.57371 5.29484 5.808L3.37482 11.3137C3.23843 11.7048 2.8108 11.9113 2.41968 11.7749C2.02857 11.6385 1.82208 11.2109 1.95847 10.8198L3.87849 5.31407C4.17029 4.47733 4.95947 3.91675 5.84564 3.91675H14.1543C15.0405 3.91675 15.8297 4.47733 16.1215 5.31407L18.0415 10.8198C18.1779 11.2109 17.9714 11.6385 17.5803 11.7749C17.1892 11.9113 16.7615 11.7048 16.6251 11.3137L14.7051 5.808C14.6234 5.57371 14.4024 5.41675 14.1543 5.41675H5.84564Z"
            fill="currentColor"
            fill-rule="evenodd"
            clip-rule="evenodd"
          ></path>
        </svg>
      </button>
    </el-tooltip>
    <el-tooltip class="item" effect="dark" content="calender" placement="right">
      <button class="btn btn-icon" to="/boards" active-class="active-link">
        <svg viewBox="0 0 20 20" fill="currentColor" width="23" height="23" aria-hidden="true" class="icon_component surface-item-icon icon_component--no-focus-style">
          <path
            d="M5.99986 1.82129C6.41407 1.82129 6.74986 2.15708 6.74986 2.57129V4.10701H13.2499V2.57129C13.2499 2.15708 13.5856 1.82129 13.9999 1.82129C14.4141 1.82129 14.7499 2.15708 14.7499 2.57129V4.107H16.2856C16.7876 4.107 17.269 4.30643 17.624 4.66141C17.979 5.01639 18.1784 5.49784 18.1784 5.99986V16.2856C18.1784 16.7876 17.979 17.269 17.624 17.624C17.269 17.979 16.7876 18.1784 16.2856 18.1784H3.71415C3.21213 18.1784 2.73067 17.979 2.37569 17.624C2.02071 17.269 1.82129 16.7876 1.82129 16.2856V5.99986C1.82129 5.49784 2.02071 5.01639 2.37569 4.66141C2.73067 4.30643 3.21213 4.107 3.71415 4.107C3.763 4.107 3.81077 4.11168 3.85702 4.1206C3.90326 4.11168 3.95102 4.10701 3.99986 4.10701H5.24986V2.57129C5.24986 2.15708 5.58565 1.82129 5.99986 1.82129ZM5.24986 7.14272V5.60701H3.99986C3.95101 5.60701 3.90324 5.60234 3.85699 5.59342C3.81075 5.60233 3.76299 5.607 3.71415 5.607C3.60995 5.607 3.51003 5.64839 3.43635 5.72207C3.36268 5.79574 3.32129 5.89567 3.32129 5.99986V16.2856C3.32129 16.3898 3.36268 16.4897 3.43635 16.5634C3.51003 16.637 3.60995 16.6784 3.71415 16.6784H16.2856C16.3898 16.6784 16.4897 16.637 16.5634 16.5634C16.637 16.4897 16.6784 16.3898 16.6784 16.2856V5.99986C16.6784 5.89567 16.637 5.79574 16.5634 5.72207C16.4897 5.64839 16.3898 5.607 16.2856 5.607H14.7499V7.14272C14.7499 7.55693 14.4141 7.89272 13.9999 7.89272C13.5856 7.89272 13.2499 7.55693 13.2499 7.14272V5.60701H6.74986V7.14272C6.74986 7.55693 6.41407 7.89272 5.99986 7.89272C5.58565 7.89272 5.24986 7.55693 5.24986 7.14272ZM13.4214 9.92231C13.6942 9.61058 13.6626 9.13676 13.3509 8.864C13.0392 8.59124 12.5653 8.62283 12.2926 8.93455L8.75058 12.9825L7.02129 11.6856C6.68992 11.437 6.21982 11.5042 5.97129 11.8356C5.72276 12.1669 5.78992 12.637 6.12129 12.8856L8.407 14.5999C8.72086 14.8353 9.16309 14.789 9.42144 14.4937L13.4214 9.92231Z"
            fill="currentColor"
            fill-rule="evenodd"
            clip-rule="evenodd"
          ></path>
        </svg>
      </button>
    </el-tooltip> -->
    <div class="user-circle-wrapper">
      <user-circle @logout="logout" :isFromSurface="true" :user="user" />
    </div>
  </nav>
</template>

<script>
import { utilService } from '../../services/util.service';
import userCircle from './user-circle';
export default {
  name: 'surfaceControl',
  data() {
    return {
      isUserMenuOpen: false,
      isDarkMode: false,
    };
  },
  computed: {
    user() {
      return this.$store.getters.user;
    },
    letterToShow() {
      return this.user ? this.user.username.charAt(0).toUpperCase() : '';
    },
    colorToShow() {
      const idx = utilService.getRandomInt(0, this.$store.getters.clrs.length - 1);
      return this.user ? this.user.color : this.$store.getters.clrs[idx];
    },
    signBtn() {
      return this.user ? 'Log out' : 'Log in';
    },
    signIcon() {
      return this.user ? '<ion-icon name="log-out-outline"></ion-icon>' : '<ion-icon name="log-in-outline"></ion-icon>';
    },
  },
  methods: {
    toggleDarkMode() {
      this.isDarkMode = !this.isDarkMode;
      this.$emit('toggleDarkMode');
    },
    toggleUserMenu() {
      this.isUserMenuOpen = !this.isUserMenuOpen;
    },
    async logout() {
      const isLoggedOut = await this.$store.dispatch({ type: 'logout' });
      console.log('isLoggedOut', isLoggedOut);
      if (isLoggedOut) this.user = null;
      this.$router.push('/login');
    },
    openProfile() {
      console.log('open profile');
    },
  },
  components: {
    userCircle,
  },
};
</script>
